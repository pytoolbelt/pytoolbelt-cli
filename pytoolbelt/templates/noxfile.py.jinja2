import nox


{% for ptvenv, config in ptvenvs.items() %}

@nox.session(python=["{{config["config"].python_version}}"])
@nox.parametrize("tool", [
    {% for tool in config["tools"] %}
    nox.param("{{tool.name}}", id="{{tool.name}}"){% if not loop.last %},
    {% endif %}
    {% endfor %}

])
def {{ config["config"].name }}(session, tool):
    session.install("pytest")
    session.install(*{{ config["config"].requirements }})
    session.run("python", "-m", "pytest", f"tools/{tool}/tests")
{% endfor %}
